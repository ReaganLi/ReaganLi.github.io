---
title: 获取注解值
date: 2020-03-03 19:28:43
tags: 注解
---

获取方法上的注解值：

    public static String getHttpUri(Method method) {
        boolean annotationPresent = method.isAnnotationPresent(HttpUri.class);
        Annotation annotation = method.getAnnotation(HttpUri.class);
        <!-- more -->
        if (annotationPresent) {
            return ((HttpUri) annotation).value();
        }
        return null;
    }

 <!-- more -->
遍历类匹配寻找有自定义注解的方法并取注解值

    public static String getAnnotationHttpUri()  {
        String uri="";
        try{
            StackTraceElement stackTraceElement[] = Thread.currentThread().getStackTrace();
            for (StackTraceElement ste : stackTraceElement){
                String className = ste.getClassName();
                String methodName = ste.getMethodName();
                Class clazz = Class.forName(className);


                Method[] methods = clazz.getMethods();
                Method method = null;
                for (Method elementMethod : methods){
                    if (elementMethod.getName().equalsIgnoreCase(methodName)){
                        method = elementMethod;
                        break;
                    }
                }
                if (method == null){
                    logger.error("method not found");
                    break;
                }
                boolean annotationPresent = method.isAnnotationPresent(HttpUri.class);
                Annotation annotation = method.getAnnotation(HttpUri.class);
                if (annotationPresent){
                    uri = ((HttpUri) annotation).value();
                }
            }
        }catch (ClassNotFoundException e){
            e.printStackTrace();
        }
        logger.info("获取HttpUri注解值为："+uri);
        return uri;
    }
